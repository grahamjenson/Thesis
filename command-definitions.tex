%=====================================================================================
%  User-defined Latex Commands
%=====================================================================================

% NATBIB Bibliography Style -- better names for harvard extended styles
%\newcommand {\citen}         [1]{\citet{#1}} % as a noun eg. Blogs (2000)
%\newcommand {\citeaffixed}   [1]{\citet{#1}}
%\newcommand {\possessivecite}[1]{\citet{#1}}
%\newcommand {\urlX}[1]{\textit{#1}}          % \url doesn't like to be movable

%%----------------------------------------------------------------------------------------

\newtheorem{defs}{Definition}
\newtheorem{obs}{Observation}
\newtheorem{prof}{Proof}
\newtheorem{prop}{Proposition}

\newcommand {\modelnamewx}{CoSyE}
\newcommand {\modelname}{\modelnamewx\xspace}
\newcommand {\modelimplwx}{BLO}
\newcommand {\modelimpl}{\modelimplwx\xspace}
\newcommand {\squarebracket}{[}

\newcommand {\usermodelwx}{SimUser}
\newcommand {\usermodel}{\usermodelwx\xspace}


\newcommand*{\bfrac}[2]{\genfrac{}{}{0pt}{}{#1}{#2}}

% put a todo item in brackets, like   (todo: expand detail here )
\newcommand {\note}[1] {\todo[inline]{#1}}

% Put comments in a margin box
\newcommand {\thought}[1]{\marginpar{#1}}
\newcommand {\aside}[1]  {\marginpar{\tiny{#1}}}
\newcommand {\idea}[1]   {\marginpar{#1}}

% Hide some text
\newcommand {\hidden }[1]{}
\newcommand {\hide }  [1]{}

\newcommand {\product}[1]{\textit{#1}\texttrademark%
                          \index{#1@\textit{#1}}%
            }
\newcommand {\fullref}[1]{\ref{#1},~p\pageref{#1}}   % -->  4.5, p29
\newcommand {\fullrefi}[1]{\ref{#1}~(p\pageref{#1})} % inline -->  4.5 (p29)
\newcommand {\fullrefp}[1]{(sec. \fullref{#1})}      % add parentheses and sec. -> (sec. 4.5, p29)

\newcommand {\skipline} {\newline ~ \newline}
\newcommand {\gap}      {\newline ~ \newline}

\newcommand {\tab} {~~~}

\newcommand {\naive} {na\"{i}ve }
\newcommand {\degrees} {$^\circ$ }            % degree symbol



% Registered (R) in a circle
\def\registered{{\ooalign{\hfil\raise.05ex\hbox{\tiny{R}}\hfil\crcr\mathhexbox20D}}}

% TEXT FORMATTING SHORTCUTS

\newcommand {\se}[1] {\small{\emph{#1}}}

% put a quotation in its own unindented paragraph
\newcommand {\inlinequote}[1] {\emph{#1}}

%%==========================================================================================
\newcommand {\shortquote}[1] {
   \noindent \begin{quote}
     \emph{#1}
   \end{quote}}

% Indented text, slightly smaller than usual, and italicised.
\newcommand {\smallquote}[1] {\begin{quote}\noindent\small{\textit{#1}} \end{quote}}

%%===========================================+=======================
\newcommand {\longquote}[1] {
   \noindent \begin{quotation}
     \emph{#1}
   \end{quotation}}

   
\newcommand{\digraph}[3][scale=1]{ 
   \newlinechar`\^^J
  \newwrite\dotfile 
  \immediate\openout\dotfile=tmp/#2.dot 
  \immediate\write\dotfile{digraph #2 {#3}} 
  \immediate\closeout\dotfile
  \immediate\write18{bash -c "dot -Tps2 tmp/#2.dot | epstopdf --filter -o=tmp/#2.pdf"}  
  \IfFileExists{tmp/#2.pdf}
  % the pdf exists: include it 
  { \includegraphics[#1]{tmp/#2} } 
  % the pdf was not created - show a hint
  { \fbox{ \begin{tabular}{l} 
        The file \texttt{tmp/#2.pdf} hasn't been created from 
        \texttt{tmp/#2.dot} yet. \\
        We attempted to create it with:\\
        `\texttt{dot -Tps2 tmp/#2.dot | epstopdf --filter -o=tmp/#2.pdf}' \\
        but that seems not to have worked. You need to execute `\texttt{pdflatex}' with \\
        the `\texttt{-shell-escape} option. You also need `\texttt{epstopdf}' from CTAN.
      \end{tabular}} 
  } 
}